{% extends 'base.html' %}
{% block content %}

<h2>รีวิว: {{ menu.name }}</h2>
<img src="{{ menu.image.url }}" alt="{{ menu.name }}" width="200">

<h3>คะแนนเฉลี่ย:
    {% for i in "12345"|make_list %}
        {% if i|add:0 <= avg_rating %}
            ⭐
        {% else %}
            ☆
        {% endif %}
    {% endfor %}
    ({{ avg_rating|floatformat:1 }})
</h3>

<!-- ฟอร์มให้คะแนน -->
<form method="post">
    {% csrf_token %}
    <label>ให้คะแนน:</label>
    <div>
        <input type="radio" name="rating" value="5"> ⭐⭐⭐⭐⭐<br>
        <input type="radio" name="rating" value="4"> ⭐⭐⭐⭐<br>
        <input type="radio" name="rating" value="3"> ⭐⭐⭐<br>
        <input type="radio" name="rating" value="2"> ⭐⭐<br>
        <input type="radio" name="rating" value="1"> ⭐<br>
    </div>

    <label>แสดงความคิดเห็น:</label>
    <textarea name="comment"></textarea>

    <button type="submit">ส่งรีวิว</button>
</form>

<!-- แสดงรีวิวทั้งหมด -->
<h3>รีวิวทั้งหมด</h3>
{% for review in reviews %}
    <p>
        {% for i in "12345"|make_list %}
            {% if i|add:0 <= review.rating %}
                ⭐
            {% else %}
                ☆
            {% endif %}
        {% endfor %}
        - {{ review.comment }}
    </p>
{% empty %}
    <p>ยังไม่มีรีวิว</p>
{% endfor %}

<a href="{% url 'menu' %}">กลับไปที่เมนู</a>

{% endblock %}